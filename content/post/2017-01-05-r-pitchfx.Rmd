---
title: "PITCHf/xから見た田中将大投手"
author: "Tsuyupon"
date: "`r Sys.Date()`"
categories: ["baseball"]
tags: ["R", "SABRmetrics"]
output:
  github_document:
    toc: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

記念すべき新BLOGの初投稿です！  
今回は「PITCHf/xから見た田中将大投手」ということでPITCHf/xシステムを通じて取得したMLBの投球データを使っていろんな角度から田中将大投手を分析したいと思います。

## PITCHf/xとは？
PITCHf/xとは、SPORTVISION社が開発した投手の投球速度や投球軌道を追跡するスピード測定器システムです。  
マウンドから本塁までの投球の球速、マグヌス効果によって引き起こされる変化の量、リリースポイント、スピン量、本塁上を通過した時にストライクゾーン内に入っているかを知ることが出来ます。

![](https://user-images.githubusercontent.com/6095476/34592967-33d1c4b8-f20b-11e7-990b-ea4ebddff76d.jpg)

引用：<http://www.baseball-lab.jp/column/entry/128/>

## 田中将大投手の成績について

以下は田中投手のMLBでの成績です。

|年   |チーム| 登板|投球回| 完投| 自責点|  奪三振| 勝| 敗| セーブ| WHIP| 防御率|
|:----|:----------|----:|---:|----:|----:|---:|--:|--:|--:|----:|----:|
|2017 |ヤンキース |   30|178 1/3|    1|   <span style="color: red">94</span>| <span style="color: blue">194</span>| 13| <span style="color: red">12</span>|  0| 1.24| 4.74|
|2016 |ヤンキース |   31|199 2/3|    0|   68| 165| 14|  4|  0| 1.08| 3.07|
|2015 |ヤンキース |   24|154|    1|   60| 139| 12|  7|  0| 0.99| 3.51|
|2014 |ヤンキース |   20|136 1/3|    3|   42| 141| 13|  5|  0| 1.06| 2.77|
|通算 | |  105|668 1/3|    5|  264| 639| 52| 28|  0| 1.10| 3.56|

2017年は、奪三振数と勝ち数が多かったものの自責点と負け数も多く、結果としてWHIP(Walks plus Hits per Inning Pitched、「投球回あたり与四球・被安打数合計」)の値が低くなってしまいました。

これは調子、配球、球速、コントロールなどいったい何が要因だったのでしょうか。さっそくPITCHf/xのデータを使って見ていきましょう。

※ WHIP = (与四球 + 被安打) ÷ 投球回  
1回に平均何人のランナーを出しているかという指標。一般に先発投手であれば1.00未満なら球界を代表するエースとされ、1.20未満ならエース級、逆に1.40を上回ると問題であると言われる。

## データの取得
まずPITCHf/xのデータの取得方法についてです。元データは<http://gd2.mlb.com/components/>にXML形式で置かれています。今回はRからこのデータをスクレイピングしてデータベースに格納してみましょう。

Rには既に`{pitchRx}`パッケージというまさにこれ専用の便利なパッケージがあります。ただ使い勝手が少々悪かったので自分用に少々手を加えました。

<https://github.com/pontsuyu/pitchRx2>

※基本的な使い方は[コチラ](https://pitchrx.cpsievert.me/)を参照

`{pitchRx}`パッケージではスクレイピングする際、初めと終わりの日付を指定するか、gameidを指定するのですが、大抵必要なデータはその中の一部で全試合欲しい場合はほとんどないと思います。`{pitchRx2}`パッケージでは`get_gids()`というgameidの一覧を取得する関数を追加しました。start_yearとend_yearを指定すれば、その年の全てのgameidを取得することが出来ます。(`pitxhRx2::game_ids`にすでに2017年までのgameidデータが入ってるので、ご活用ください。)この関数を実行した後、`stringr::str_detect()`などで日付やチームを絞ってから`scrape()`を実行するのが、効率的かと思います。

`{pitchRx2}`パッケージはまだまだ改良の余地があるので要望があれば、[twitter](https://twitter.com/ponsa__ku)でご連絡いただくか、Githubの[Issues](https://github.com/pontsuyu/pitchRx2/issues)に書き込むなりしていただければと思います。



## セイバーメトリクス(DIPS, K/BB)について
	- ランキング形式でまとめる
## 対打席結果のまとめ
	- 2017年は被本塁打率の高いことを言及したい
## 使用球種の比率のまとめ
	- ストレート率が低く、SFF率が高いことを言及
	- リリースポイントに対するブレを言及
	- どの球種が打たれているのかをまとめる
## 緩急、キレ、ノビの分析
## つづく

